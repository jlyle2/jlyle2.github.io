<html>
<head>
  <script>(function (u, n, i, v, e, r, s, a, l) { u[r] = {}; u[r].uid = '748dcc9d-0232-4373-b4e1-4e0bacdede8c'; u[r].m = ['getReferrerInfo', 'identify', 'integrationsReady', 'on', 'ready', 'track']; u[r].queue = []; u[r].f = function(t) { return function() { var l = Array.prototype.slice.call(arguments); l.unshift(t); u[r].queue.push(l); return u[r].queue; }; }; for (var t = 0; t < u[r].m.length; t++) { l = u[r].m[t]; u[r][l] = u[r].f(l); } a = n.createElement(v); a.src = e + '/us-' + u[r].uid + '.js'; a.async = s; n.getElementsByTagName(i)[0].appendChild(a); })(window, document, 'head', 'script', 'https://cdn.getambassador.com', 'mbsy', true);</script>
  <script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="wtUwWGewLq5y6CHRZmX29BkxwcghEy94";;analytics.SNIPPET_VERSION="4.15.3";
  analytics.load("wtUwWGewLq5y6CHRZmX29BkxwcghEy94");
  analytics.page();
  }}();
    analytics.identify('', {
  first_name: 'Test',
  last_name: "Name",
  email: 'testUser2@getambassador.com'
});

    analytics.track('Article Bookmarked', {
  title: 'Snow Fall',
  subtitle: 'The Avalanche at Tunnel Creek',
  author: 'John Branch'
});
</script>
  <script>
     mbsy.identify(
    {
    email: "testUser2@getambassador.com",
    firstName: "Test",
    lastName: "User",
    },
    {
    campaigns: 49294,
    }
    );
  </script>
  <style>
    h2{
      width:100%;
      font-family: "Roboto";
      padding:20px;
      color: white;
      background-color: black;
    }
    .resultBlock{
      background-color: LightGray;
      padding:20px;
      white-space: pre-wrap;
    }
    .hidden
    {
      visibility:hidden;
    }
    input[type=text], select {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

input[type=submit] {
  width: 50%;
  background-color: rgba(255,78,72,1.0);
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

input[type=submit]:hover {
  background-color: #45a049;
}
form{
  width:30%;
    }
  </style>
   </head>
<body>
<h2>Form Script Tool</h2>
<form onsubmit="createVariables(event)">
  <label for="formId">Form Id:</label><input id='formId' type="text"><br/>
  <label for="firstName">First Name Field:</label><input id='firstName' type="text"><br/>
  <label for="lastName">Last Name Field:</label><input id='lastName' type="text"><br/>
   <label for="email">Email Address Field:</label><input id='email' type="text"><br/>
  <label for="storage">Store Values:</label><input id='storage' type="checkbox"><br/>
  <span>(Save values for conversion on another page)</span><br/>
  <input type="submit">
</form>
<div id='variableCode' class='resultBlock hidden'></div>
<br/>
<div id='storageCode' class='resultBlock hidden'></div>
</body>
 <script>
  const createVariables = (event) =>
  {
    var formId = document.getElementById('formId').value;
    var firstName = document.getElementById('firstName').value;
    var lastName = document.getElementById('lastName').value;
    var email = document.getElementById('email').value;
    var storage = document.getElementById('storage').checked;
    event.preventDefault();
    var resultText = document.createTextNode(`<script>\n`+
    `const form = document.getElementById('${formId}');\n`+
    `var mbsyFirstName; var mbsyLastName;\n var mbsyEmail;\n`+
    `const assignVariables = () ={\n`+
    (firstName && `mbsyFirstName = document.getElementById('${firstName}').value;\n`)+
    (firstName && storage && `window.localStorage.setItem('mbsyFirstName',mbsyFirstName);\n`)+ 
    (lastName && `mbsyLastName = document.getElementById('${lastName}').value;\n`)+
    (lastName && storage && `window.localStorage.setItem('mbsyLastName',mbsyLastName);\n`)+ 
    (email && `mbsyEmail = document.getElementById('${email}').value;\n`)+
    (email && storage && `window.localStorage.setItem('mbsyEmail',mbsyEmail);\n`)+`}\n`+
    `form.addEventListener('submit', assignVariables);\n <\/script>`);
  const result = document.getElementById('variableCode');
  result.appendChild(resultText);
  result.classList.remove("hidden");
  if(storage)
  {
    
  var storageText = document.createTextNode(`<script>\n`+
                                           (firstName && `mbsyFirstName = window.localStorage.getItem('mbsyFirstName')\n`)+
                                           (lastName && `mbsyLastName = window.localStorage.getItem('mbsyLastName')\n`)+
                                           (lastName && `mbsyEmail = window.localStorage.getItem('mbsyEmail')\n`)+
                                            `<\/script>`);
  const storageSection = document.getElementById('storageCode');
  storageSection.appendChild(storageText);
  storageSection.classList.remove("hidden");
  }
  }
  </script>
</html>
