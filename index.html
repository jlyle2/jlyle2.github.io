<html>
<head>
  <style>
    .resultBlock{
      background-color: LightGray;
      padding:20px;
      white-space: pre-wrap;
    }
    input[type=text], select {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

input[type=submit] {
  width: 100%;
  background-color: #4CAF50;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

input[type=submit]:hover {
  background-color: #45a049;
}
  </style>
   </head>
<body>
<h2>Form Script Tool</h2>
<form onsubmit="createVariables(event)">
  <label for="formId">Form Id:</label><input id='formId' type="text"><br/>
  <label for="firstName">First Name Field:</label><input id='firstName' type="text"><br/>
  <label for="lastName">Last Name Field:</label><input id='lastName' type="text"><br/>
   <label for="email">Email Address Field:</label><input id='email' type="text"><br/>
  <label for="storage">Store Values:</label><input id='storage' type="checkbox"><br/>
  <span>(Save values for conversion on another page)</span>
  <input type="submit">
</form>
<div id='variableCode' class='resultBlock'></div>
<br/>
<div id='storageCode' class='resultBlock'></div>
</body>
 <script>
  const createVariables = (event) =>
  {
    var formId = document.getElementById('formId').value;
    var firstName = document.getElementById('firstName').value;
    var lastName = document.getElementById('lastName').value;
    var email = document.getElementById('email').value;
    var storage = document.getElementById('storage').value;
    event.preventDefault();
    var resultText = document.createTextNode(`<script>\n`+
    `const form = document.getElementById('${formId}');\n`+
    `var mbsyFirstName; var mbsyLastName;\n var mbsyEmail;\n`+
    `const assignVariables = () ={\n`+
    (firstName && `mbsyFirstName = document.getElementById('${firstName}').value;\n`)+
    (firstName && storage && `window.localStorage.setItem('mbsyFirstName',mbsyFirstName);\n`)+ 
    (lastName && `mbsyLastName = document.getElementById('${lastName}').value;\n`)+
    (lastName && storage && `window.localStorage.setItem('mbsyLastName',mbsyLastName);\n`)+ 
    (email && `mbsyEmail = document.getElementById('${email}').value;\n`)+
    (email && storage && `window.localStorage.setItem('mbsyEmail',mbsyEmail);\n`)+`}\n`+
    `form.addEventListener('submit', assignVariables);\n <\/script>`);
  const result = document.getElementById('variableCode');
  result.appendChild(resultText);
  if(storage)
  {
  var storageText = document.createTextNode(`<script>\n`+
                                           (firstName && `mbsyFirstName = window.localStorage.getItem('mbsyFirstName')\n`)+
                                           (lastName && `mbsyLastName = window.localStorage.getItem('mbsyLastName')\n`)+
                                           (lastName && `mbsyEmail = window.localStorage.getItem('mbsyEmail')\n`)+
                                            `<\/script>`);
  const storageSection = document.getElementById('storageCode');
  storageSection.appendChild(storageText);
  }
  }
  </script>
</html>
